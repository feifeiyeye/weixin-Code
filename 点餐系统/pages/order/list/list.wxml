<!--pages/order/list/list.wxml-->
<wxs module="priceFormat">
module.exports = function(price) {
  return '￥' + parseFloat(price).toFixed(2);
};
</wxs>

<wxs module="formatDate">
module.exports = function(timestamp) {
  var date = getDate(timestamp);
  var year = date.getFullYear();
  var month = date.getMonth() + 1;
  var day = date.getDate();
  
  month = month < 10 ? '0' + month : month;
  day = day < 10 ? '0' + day : day;
  
  return year + '-' + month + '-' + day;
};
</wxs>

<view class="list">
  <view class="list-empty" wx:if="{{order.length === 0}}">您还没有下过订单</view>
  <view class="list-item" wx:for="{{order}}" wx:key="id">
    <view class="list-item-l">
      <view class="list-item-t">下单时间：{{formatDate(item.create_time)}}</view>
      <view class="list-item-name">{{item.first_food_name}}</view>
      <view>等{{item.number}}件商品 <text class="list-item-price">{{priceFormat(item.price)}}</text></view>
    </view>
    <view class="list-item-r">
      <view bindtap="detail" data-id="{{item.id}}" class="list-item-detail">查看详情</view>
      <view wx:if="{{item.is_taken}}" class="list-item-taken list-item-taken-yes">已取餐</view>
      <view wx:else class="list-item-taken list-item-taken-no">未取餐</view>
    </view>
  </view>
  <view class="list-item-last" wx:if="{{is_last}}">已经到底啦</view>
  <view class="list-item-last" wx:else>加载中...</view>
</view>